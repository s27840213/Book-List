import{d as M,b as N,e as $,i as y,j as I,k as z,A as _,f,a as t,l as g,v as m,n as h,u as s,t as B,h as F,p as O,m as T,o as C}from"./index-05d18f05.js";const w=a=>(O("data-v-68af06cd"),a=a(),T(),a),q={class:"flex h-full flex-col items-center justify-center p-4 md:p-8"},G={class:"container-style"},H=w(()=>t("span",{class:"placeholder-style top-1/2 -translate-y-6 text-xs"},"書名",-1)),J={class:"container-style"},K=w(()=>t("span",{class:"placeholder-style top-1/2 -translate-y-6 text-xs"},"作者",-1)),L={class:"container-style"},P=w(()=>t("span",{class:"placeholder-style -translate-y- top-1 text-xs"},"備註",-1)),Q={key:0,class:"flex gap-4 px-8 py-8 md:px-16"},R={key:1,class:"flex gap-4 px-8 py-8 md:px-16"},W=M({__name:"BookForm",props:{book:null},setup(a){const x=a,{book:o}=x,{isShowingDetail:n,isAddingBook:p,isEditingBook:S,setState:v}=N(),{addBook:U,patchBook:j,deleteBook:A}=$(),E=async()=>{await A(o.id),v("listing")},r=y(""),i=y(""),u=y(""),b=I(()=>{if(p.value)return{callback:async()=>{r.value!==""&&i.value!==""?(await U({title:r.value,author:i.value,description:u.value}),r.value="",i.value="",u.value=""):_({text:"書名跟作者都需有值!",group:"error"})},text:"新增"};if(S.value&&o)return{callback:()=>{r.value!==""&&i.value!==""?j(o.id,{title:r.value,author:i.value,description:u.value}):_({text:"書名跟作者都需有值!",group:"error"})},text:"修改"}}),k=I(()=>{if(p.value)return{callback:()=>{v("listing")},text:"取消"};if(S.value&&o)return{callback:()=>{v("showingDetail")},text:"取消"}});return z(()=>{n.value&&(o?(r.value=o.title,i.value=o.author,u.value=o.description):(_({text:"沒有書籍資料!",group:"error"}),v("listing")))}),(Y,e)=>{var V,D;return C(),f("div",q,[t("div",G,[H,g(t("input",{class:h(["input-style rounded-3xl",{"pointer-events-none":s(n)}]),type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l)},null,2),[[m,r.value]])]),t("div",J,[K,g(t("input",{class:h(["input-style rounded-3xl",{"pointer-events-none":s(n)}]),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l)},null,2),[[m,i.value]])]),t("div",L,[P,g(t("textarea",{class:h(["input-style min-h-[240px] rounded-xl",{"pointer-events-none":s(n)}]),"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l)},null,2),[[m,u.value]])]),s(n)?F("",!0):(C(),f("div",Q,[t("button",{class:"box-border rounded-3xl bg-slate-500 px-8 py-2 text-slate-200 hover:bg-slate-500 active:bg-slate-600",onClick:e[3]||(e[3]=(...l)=>{var c,d;return((c=s(k))==null?void 0:c.callback)&&((d=s(k))==null?void 0:d.callback(...l))})},B((V=s(k))==null?void 0:V.text),1),t("button",{class:"box-border rounded-3xl bg-blue-400 px-8 py-2 text-slate-200 hover:bg-blue-500 active:bg-blue-600",onClick:e[4]||(e[4]=(...l)=>{var c,d;return((c=s(b))==null?void 0:c.callback)&&((d=s(b))==null?void 0:d.callback(...l))})},B((D=s(b))==null?void 0:D.text),1)])),s(n)?(C(),f("div",R,[t("button",{class:"box-border rounded-3xl bg-red-500 px-8 py-2 text-slate-200 hover:bg-slate-500 active:bg-slate-600",onClick:e[5]||(e[5]=l=>E())},B("刪除"))])):F("",!0)])}}});const X=(a,x)=>{const o=a.__vccOpts||a;for(const[n,p]of x)o[n]=p;return o},ee=X(W,[["__scopeId","data-v-68af06cd"]]);export{ee as B};
