import{d as M,b as N,e as $,i as k,j as I,k as z,A as y,f as g,a as t,l as f,v as m,n as h,u as s,t as B,h as U,o as C,p as O,m as T}from"./index-faf46705.js";const w=a=>(O("data-v-570b69ea"),a=a(),T(),a),q={class:"flex h-full flex-col items-center justify-center p-4 md:p-8"},G={class:"container-style"},H=w(()=>t("span",{class:"placeholder-style top-1/2 -translate-y-6 text-xs"},"書名",-1)),J={class:"container-style"},K=w(()=>t("span",{class:"placeholder-style top-1/2 -translate-y-6 text-xs"},"作者",-1)),L={class:"container-style"},P=w(()=>t("span",{class:"placeholder-style -translate-y- top-1 text-xs"},"備註",-1)),Q={key:0,class:"flex gap-4 px-8 py-8 md:px-16"},R={key:1,class:"flex gap-4 px-8 py-8 md:px-16"},W=M({__name:"BookForm",props:{book:null},setup(a){const x=a,{book:o}=x,{isShowingDetail:n,isAddingBook:d,isEditingBook:S,setState:v}=N(),{addBook:j,patchBook:A,deleteBook:E}=$(),F=async()=>{await E(o.id),v("listing")},i=k(""),r=k(""),u=k(""),b=I(()=>{if(d.value)return{callback:async()=>{i.value!==""&&r.value!==""?(await j({title:i.value,author:r.value,description:u.value}),i.value="",r.value="",u.value=""):y({text:"書名跟作者都需有值!",group:"error"})},text:"新增"};if(S.value&&o)return{callback:()=>{i.value!==""&&r.value!==""?A(o.id,{title:i.value,author:r.value,description:u.value}):y({text:"書名跟作者都需有值!",group:"error"})},text:"修改"}}),_=I(()=>{if(d.value)return{callback:()=>{v("listing")},text:"取消"};if(S.value&&o)return{callback:()=>{v("showingDetail")},text:"取消"}});return z(()=>{n&&(o?(i.value=o.title,r.value=o.author,u.value=o.description):(y({text:"沒有書籍資料!",group:"error"}),v("listing")))}),(Y,e)=>{var V,D;return C(),g("div",q,[t("div",G,[H,f(t("input",{class:h(["input-style rounded-3xl",{"pointer-events-none":s(n)}]),type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l)},null,2),[[m,i.value]])]),t("div",J,[K,f(t("input",{class:h(["input-style rounded-3xl",{"pointer-events-none":s(n)}]),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l)},null,2),[[m,r.value]])]),t("div",L,[P,f(t("textarea",{class:h(["input-style min-h-[240px] rounded-xl",{"pointer-events-none":s(n)}]),"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l)},null,2),[[m,u.value]])]),s(n)?U("",!0):(C(),g("div",Q,[t("button",{class:"box-border rounded-3xl bg-slate-500 px-8 py-2 text-slate-200 hover:bg-slate-500 active:bg-slate-600",onClick:e[3]||(e[3]=(...l)=>{var c,p;return((c=s(_))==null?void 0:c.callback)&&((p=s(_))==null?void 0:p.callback(...l))})},B((V=s(_))==null?void 0:V.text),1),t("button",{class:"box-border rounded-3xl bg-blue-400 px-8 py-2 text-slate-200 hover:bg-blue-500 active:bg-blue-600",onClick:e[4]||(e[4]=(...l)=>{var c,p;return((c=s(b))==null?void 0:c.callback)&&((p=s(b))==null?void 0:p.callback(...l))})},B((D=s(b))==null?void 0:D.text),1)])),s(n)?(C(),g("div",R,[t("button",{class:"box-border rounded-3xl bg-red-500 px-8 py-2 text-slate-200 hover:bg-slate-500 active:bg-slate-600",onClick:e[5]||(e[5]=l=>F())},B("刪除"))])):U("",!0)])}}});const X=(a,x)=>{const o=a.__vccOpts||a;for(const[n,d]of x)o[n]=d;return o},ee=X(W,[["__scopeId","data-v-570b69ea"]]);export{ee as _};
